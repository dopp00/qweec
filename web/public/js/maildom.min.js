"use strict";const G_L=new LangData("maildom-lang");async function maildom_certTypeSelector(e,l){if(!params_Validate(l,"e",1))return;const d=l[0],i=document.querySelector("label[for=maildom-"+d+"-ssl-privkey]"),a=document.getElementById("maildom-"+d+"-ssl-privkey"),m=document.querySelector("label[for=maildom-"+d+"-ssl-fullchain]"),t=document.getElementById("maildom-"+d+"-ssl-fullchain");if(!(i&&a&&m&&t))return;const o=document.getElementById("maildom-"+d+"-ssl-custom"),n=o&&o.checked;enableClass_DBlock(i,n),enableClass_DBlock(a,n),enableClass_DBlock(m,n),enableClass_DBlock(t,n)}async function maildom_Add_Confirm(e,l){const d=new PrepData(10);let i=!1;if(d.prepareValue(0,"#maildom-add-domain",!0,G_L.raw("domain")+" "+G_L.raw("is required"))||(i=!0),i)return;d.prepareValue(1,"#maildom-add-ip4",!1,""),d.prepareValue(2,"#maildom-add-ip6",!1,""),d.prepareRadio(3,["#maildom-add-ssl-none","#maildom-add-ssl-ss","#maildom-add-ssl-le","#maildom-add-ssl-custom"]),d.prepareRadio(4,["#maildom-add-dkim-none","#maildom-add-dkim-1024","#maildom-add-dkim-2048","#maildom-add-dkim-4096"]),d.prepareChecked(5,"#maildom-add-antivirus"),d.prepareChecked(6,"#maildom-add-antispam"),d.prepareValue(7,"#maildom-add-catchall",!1,""),d.prepareValue(8,"#maildom-add-ssl-privkey",!1,""),d.prepareValue(9,"#maildom-add-ssl-fullchain",!1,"");const a="maildom-add-confirm",m=new ButtonState(a),t=await fetchText_Post("/maildom/?a="+a,d.arr.join(" "));m.restore(),isFetchedOk(t,"/maildom/")}async function maildom_Edit_Confirm(e,l){const d=new PrepData(10);let i=!1;if(d.prepareValue(0,"#maildom-edit-domain",!0,!0,G_L.raw("domain")+" "+G_L.raw("is required"))||(i=!0),i)return;d.prepareValue(1,"#maildom-edit-ip4",!1,""),d.prepareValue(2,"#maildom-edit-ip6",!1,""),d.prepareRadio(3,["#maildom-edit-ssl-none","#maildom-edit-ssl-ss","#maildom-edit-ssl-le","#maildom-edit-ssl-custom"]),d.prepareRadio(4,["#maildom-edit-dkim-none","#maildom-edit-dkim-1024","#maildom-edit-dkim-2048","#maildom-edit-dkim-4096"]),d.prepareChecked(5,"#maildom-edit-antivirus"),d.prepareChecked(6,"#maildom-edit-antispam"),d.prepareValue(7,"#maildom-edit-catchall",!1,""),d.prepareValue(8,"#maildom-edit-ssl-privkey",!1,""),d.prepareValue(9,"#maildom-edit-ssl-fullchain",!1,"");const a="maildom-edit-confirm",m=new ButtonState(a),t=await fetchText_Post("/maildom/?a="+a,d.arr.join(" "));m.restore(),isFetchedOk(t,"/maildom/")}async function maildom_Dns_table_storeDomains_getMaildomId(e,l){const d=document.querySelectorAll("table#tbl-maildom tbody tr"),i=[];for(let e=0;e<d.length;e+=1)d[e].querySelector(".checkbox-simple-cntr input[type=checkbox]").checked&&d[e].id.length&&i.push(d[e].id);if(i.length<1)return void notificationNew_addError("no mail domains selected");let a=new PrepData(1);if(a.prepareString(0,i.join(",")),""===a.arr[0]);else{const e=await fetchText_Post("/dns/?a=dns-maildom-store-id",a.arr.join(","));isFetchedOkWithLink2("/dns/?a=dns-maildom&prov=&ipv=&dns=",e,!0)}}common_listeners(),listener_AddSingleById("maildom-edit","click","keyup","Enter",table_OnButtonClick_Router,"tbl-maildom","/maildom/?a=maildom-edit&maildom=",""),listener_AddSingleById("maildom-dns","click","keyup","Enter",maildom_Dns_table_storeDomains_getMaildomId),listener_AddSingleById("maildom-on","click","keyup","Enter",table_RunPostOnButtonClick_MultiRouter,"tbl-maildom","/maildom/?a=maildom-on","/maildom/",""),listener_AddSingleById("maildom-off","click","keyup","Enter",table_RunPostOnButtonClick_MultiRouter,"tbl-maildom","/maildom/?a=maildom-off","/maildom/",""),listener_AddSingleById("maildom-delete-wnd","click","keyup","Enter",table_openDeleteWnd,"tbl-maildom","/maildom/?a=maildom-delete","/maildom/",G_L.esc("Delete")+" "+G_L.esc("mail domains"),G_L.esc("Next items will be deleted"),G_L.esc("Confirm"),null),listener_AddSingleById("maildom-add-ssl-none","change",null,null,maildom_certTypeSelector,"add"),listener_AddSingleById("maildom-add-ssl-ss","change",null,null,maildom_certTypeSelector,"add"),listener_AddSingleById("maildom-add-ssl-le","change",null,null,maildom_certTypeSelector,"add"),listener_AddSingleById("maildom-add-ssl-custom","change",null,null,maildom_certTypeSelector,"add"),listener_AddSingleById("maildom-add-confirm","click","keyup","Enter",maildom_Add_Confirm),listener_AddSingleById("maildom-edit-ssl-none","change",null,null,maildom_certTypeSelector,"edit"),listener_AddSingleById("maildom-edit-ssl-ss","change",null,null,maildom_certTypeSelector,"edit"),listener_AddSingleById("maildom-edit-ssl-le","change",null,null,maildom_certTypeSelector,"edit"),listener_AddSingleById("maildom-edit-ssl-custom","change",null,null,maildom_certTypeSelector,"edit"),listener_AddSingleById("maildom-edit-confirm","click","keyup","Enter",maildom_Edit_Confirm),listeners_Add("table.tbl-fixed tbody","tr","mouseup",null,null,table_OnClickRouter,"/maildom/?a=maildom-edit&maildom="),listener_AddSingleById("maildom-name-sort","click",null,null,table_Sort,"/maildom/","maildom-table-sort","sort-no,sort-name-az,sort-name-za"),listener_AddSingleById("maildoms-checkbox-header","mouseup",null,null,table_SetAllCheckboxes,"table#tbl-maildom tbody tr td .checkbox-simple-cntr input[type=checkbox]"),listeners_Add(null,".pageidx","click",null,null,table_SelectPage,"maildom-table-page","/maildom/"),listener_AddSingleById("maildom-table-setting","click","keyup","Enter",tableSetting_Modal_OpenWnd,JSON.stringify({id:"maildom-table-setting",cookie:"maildom-table-setting",path:"/maildom/",titles:[G_L.esc("Settings"),G_L.esc("Number of rows"),G_L.esc("custom"),G_L.esc("Confirm")],values:[1,2,4,8,16,32,64],names:["domain","ssl","ipaddresses","dkim","antivirus","antispam","accounts"],labels:[G_L.esc("domain"),"ssl",G_L.esc("ip addresses"),"dkim",G_L.esc("antivirus"),G_L.esc("antispam"),G_L.esc("accounts")]}));