"use strict";const G_L=new LangData("cron-lang");async function cron_periodSelector(e,n){if(!params_Validate(n,"e",1))return;const l=n[0],o=document.getElementById("cron-"+l+"-gen-min"),r=document.getElementById("cron-"+l+"-gen-hourly"),t=document.getElementById("cron-"+l+"-gen-daily"),c=document.getElementById("cron-"+l+"-gen-weekly"),a=document.getElementById("cron-"+l+"-gen-monthly"),d=document.getElementById("cron-"+l+"-gen-common-day"),i=document.getElementById("cron-"+l+"-gen-common-hour"),s=document.getElementById("cron-"+l+"-gen-common-min");if(o&&r&&t&&c&&a&&d&&i&&s)switch(e.target.value){case"monthly":enableClass_DBlock(o,!1),enableClass_DBlock(r,!1),enableClass_DBlock(t,!1),enableClass_DBlock(c,!1),enableClass_DBlock(a,!0),enableClass_DInblock(d,!0),enableClass_DInblock(i,!0),enableClass_DInblock(s,!0);break;case"weekly":enableClass_DBlock(o,!1),enableClass_DBlock(r,!1),enableClass_DBlock(t,!1),enableClass_DBlock(c,!0),enableClass_DBlock(a,!1),enableClass_DInblock(d,!1),enableClass_DInblock(i,!0),enableClass_DInblock(s,!0);break;case"daily":enableClass_DBlock(o,!1),enableClass_DBlock(r,!1),enableClass_DBlock(t,!0),enableClass_DBlock(c,!1),enableClass_DBlock(a,!1),enableClass_DInblock(d,!1),enableClass_DInblock(i,!0),enableClass_DInblock(s,!0);break;case"hourly":enableClass_DBlock(o,!1),enableClass_DBlock(r,!0),enableClass_DBlock(t,!1),enableClass_DBlock(c,!1),enableClass_DBlock(a,!1),enableClass_DInblock(d,!1),enableClass_DInblock(i,!1),enableClass_DInblock(s,!0);break;default:enableClass_DBlock(o,!0),enableClass_DBlock(r,!1),enableClass_DBlock(t,!1),enableClass_DBlock(c,!1),enableClass_DBlock(a,!1),enableClass_DInblock(d,!1),enableClass_DInblock(i,!1),enableClass_DInblock(s,!1)}}async function cron_Generator(e,n){if(!params_Validate(n,"e",1))return;const l=n[0],o=document.getElementById("cron-"+l+"-sel-min"),r=document.getElementById("cron-"+l+"-sel-hourly"),t=document.getElementById("cron-"+l+"-sel-daily"),c=document.getElementById("cron-"+l+"-sel-weekly"),a=document.getElementById("cron-"+l+"-sel-monthly");if(!(o&&r&&t&&c&&a))return;const d=document.getElementById("cron-"+l+"-min"),i=document.getElementById("cron-"+l+"-hour"),s=document.getElementById("cron-"+l+"-day"),u=document.getElementById("cron-"+l+"-month"),m=document.getElementById("cron-"+l+"-wday");if(d&&i&&s&&u&&m)if(o.checked){const e=document.getElementById("cron-"+l+"-gen-min");if(!e)return void notificationNew_addError("cron has not been set");d.value=e.value,i.value="*",s.value="*",u.value="*",m.value="*"}else if(r.checked){const e=document.getElementById("cron-"+l+"-gen-hourly"),n=document.getElementById("cron-"+l+"-gen-common-min");if(!e||!n)return void notificationNew_addError("cron has not been set");d.value=n.value,i.value=e.value,s.value="*",u.value="*",m.value="*"}else if(t.checked){const e=document.getElementById("cron-"+l+"-gen-daily"),n=document.getElementById("cron-"+l+"-gen-common-hour"),o=document.getElementById("cron-"+l+"-gen-common-min");if(!e||!n||!o)return void notificationNew_addError("cron has not been set");d.value=o.value,i.value=n.value,s.value=e.value,u.value="*",m.value="*"}else if(c.checked){const e=document.getElementById("cron-"+l+"-gen-weekly"),n=document.getElementById("cron-"+l+"-gen-common-hour"),o=document.getElementById("cron-"+l+"-gen-common-min");if(!e||!n||!o)return void notificationNew_addError("cron has not been set");d.value=o.value,i.value=n.value,s.value="*",u.value="*",m.value=e.value}else if(a.checked){const e=document.getElementById("cron-"+l+"-gen-monthly"),n=document.getElementById("cron-"+l+"-gen-common-day"),o=document.getElementById("cron-"+l+"-gen-common-hour"),r=document.getElementById("cron-"+l+"-gen-common-min");if(!(e&&n&&o&&r))return void notificationNew_addError("cron has not been set");d.value=r.value,i.value=o.value,s.value=n.value,u.value=e.value,m.value="*"}}async function cron_Add_Confirm(e,n){const l=new PrepData(6);let o=!1;if(l.prepareValue(0,"#cron-add-min",!0,G_L.raw("minute")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(1,"#cron-add-hour",!0,G_L.raw("hour")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(2,"#cron-add-day",!0,G_L.raw("day")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(3,"#cron-add-month",!0,G_L.raw("month")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(4,"#cron-add-wday",!0,G_L.raw("weekday")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(5,"#cron-add-command",!0,G_L.raw("command")+" "+G_L.raw("is required"))||(o=!0),o)return;const r="cron-add-confirm",t=new ButtonState(r),c=await fetchText_Post("/cron/?a="+r,l.arr.join(" "));t.restore(),isFetchedOk(c,"/cron/")}async function cron_Edit_Confirm(e,n){const l=new PrepData(7);let o=!1;if(l.prepareValue(0,"#cron-edit-jobid",!0,G_L.raw("job id")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(1,"#cron-edit-min",!0,G_L.raw("minute")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(2,"#cron-edit-hour",!0,G_L.raw("hour")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(3,"#cron-edit-day",!0,G_L.raw("day")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(4,"#cron-edit-month",!0,G_L.raw("month")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(5,"#cron-edit-wday",!0,G_L.raw("weekday")+" "+G_L.raw("is required"))||(o=!0),l.prepareValue(6,"#cron-edit-command",!0,G_L.raw("command")+" "+G_L.raw("is required"))||(o=!0),o)return;const r="cron-edit-confirm",t=new ButtonState(r),c=await fetchText_Post("/cron/?a="+r,l.arr.join(" "));t.restore(),isFetchedOk(c,"/cron/")}common_listeners(),listener_AddSingleById("cron-edit","click","keyup","Enter",table_OnButtonClick_Router,"tbl-cron","/cron/?a=cron-edit&cron=",""),listener_AddSingleById("cron-run","click","keyup","Enter",table_RunPostOnButtonClick_MultiRouter,"tbl-cron","/cron/?a=cron-run","/cron/",""),listener_AddSingleById("cron-on","click","keyup","Enter",table_RunPostOnButtonClick_MultiRouter,"tbl-cron","/cron/?a=cron-on","/cron/",""),listener_AddSingleById("cron-off","click","keyup","Enter",table_RunPostOnButtonClick_MultiRouter,"tbl-cron","/cron/?a=cron-off","/cron/",""),listener_AddSingleById("cron-delete-wnd","click","keyup","Enter",table_openDeleteWnd,"tbl-cron","/cron/?a=cron-delete","/cron/",G_L.esc("Delete")+" "+G_L.esc("cron jobs"),G_L.esc("Next items will be deleted"),G_L.esc("Confirm"),null),listener_AddSingleById("cron-add-sel-min","change",null,null,cron_periodSelector,"add"),listener_AddSingleById("cron-add-sel-hourly","change",null,null,cron_periodSelector,"add"),listener_AddSingleById("cron-add-sel-daily","change",null,null,cron_periodSelector,"add"),listener_AddSingleById("cron-add-sel-weekly","change",null,null,cron_periodSelector,"add"),listener_AddSingleById("cron-add-sel-monthly","change",null,null,cron_periodSelector,"add"),listener_AddSingleById("cron-add-gen","click",null,null,cron_Generator,"add"),listener_AddSingleById("cron-add-confirm","click","keyup","Enter",cron_Add_Confirm),listener_AddSingleById("cron-edit-sel-min","change",null,null,cron_periodSelector,"edit"),listener_AddSingleById("cron-edit-sel-hourly","change",null,null,cron_periodSelector,"edit"),listener_AddSingleById("cron-edit-sel-daily","change",null,null,cron_periodSelector,"edit"),listener_AddSingleById("cron-edit-sel-weekly","change",null,null,cron_periodSelector,"edit"),listener_AddSingleById("cron-edit-sel-monthly","change",null,null,cron_periodSelector,"edit"),listener_AddSingleById("cron-edit-gen","click",null,null,cron_Generator,"edit"),listener_AddSingleById("cron-edit-confirm","click","keyup","Enter",cron_Edit_Confirm),listeners_Add("table.tbl-fixed tbody","tr","mouseup",null,null,table_OnClickRouter,"/cron/?a=cron-edit&cron="),listener_AddSingleById("cron-name-sort","click",null,null,table_Sort,"/cron/","cron-table-sort","sort-no,sort-name-az,sort-name-za"),listener_AddSingleById("crons-checkbox-header","mouseup",null,null,table_SetAllCheckboxes,"table#tbl-cron tbody tr td .checkbox-simple-cntr input[type=checkbox]"),listeners_Add(null,".pageidx","click",null,null,table_SelectPage,"cron-table-page","/cron/"),listener_AddSingleById("cron-table-setting","click","keyup","Enter",tableSetting_Modal_OpenWnd,JSON.stringify({id:"cron-table-setting",cookie:"cron-table-setting",path:"/cron/",titles:[G_L.esc("Settings"),G_L.esc("Number of rows"),G_L.esc("custom"),G_L.esc("Confirm")],values:[1,2],names:["timeperiod","command"],labels:[G_L.esc("time period"),G_L.esc("command")]}));