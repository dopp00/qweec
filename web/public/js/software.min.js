"use strict";const G_L=new LangData("software-lang");async function Software_Enable(e,t){if(params_Validate(t,"ge",2)){if("modal-submit"==e.target.id){const e=t[0],a=t[1];"software-enable"!==a&&"software-disable"!==a&&notificationNew_addError("invalid action");const n=new ButtonState("modal-submit"),s=await fetchText_Post("/software/?a="+a+"&t="+csrf_getPageToken(),e);if(n.restore(),!isFetchedOk(s,"/software/"))return}}else notificationNew_addError("invalid input data specified")}function software_OpenConfirmationWnd_Radio(e){switch(e){case"software-webserver-httpd":return{action:"software-disable",soft:"nginx",softLabel:"nginx",titleText:G_L.esc("Uninstallation"),actionText:G_L.esc("Disable the software"),warningLabel:G_L.esc("Warning: All web configs will be rebuilt!")};case"software-webserver-nginx-httpd":return{action:"software-enable",soft:"nginx",softLabel:"nginx",titleText:G_L.esc("Installation"),actionText:G_L.esc("Activate the software"),warningLabel:G_L.esc("Warning: All web configs will be rebuilt!")};case"software-firewall-off":return{action:"software-disable",soft:"firewall-off",softLabel:"firewall",titleText:G_L.esc("Uninstallation"),actionText:G_L.esc("Disable the software"),warningLabel:G_L.esc("Web panel will stop working for awhile")};case"software-firewall-iptables":return{action:"software-enable",soft:"iptables",softLabel:"iptables",titleText:G_L.esc("Installation"),actionText:G_L.esc("Activate the software"),warningLabel:G_L.esc("Web panel will stop working for awhile")};case"software-firewall-nftables":return{action:"software-enable",soft:"nftables",softLabel:"nftables",titleText:G_L.esc("Installation"),actionText:G_L.esc("Activate the software"),warningLabel:G_L.esc("Web panel will stop working for awhile")}}return null}function software_OpenConfirmationWnd_Checkbox(e,t){let a={action:"software-disable",soft:"",softLabel:"",titleText:G_L.esc("Uninstallation"),actionText:G_L.esc("Disable the software"),warningLabel:G_L.esc("Warning: All web configs will be rebuilt!")};switch(t&&(a.action="software-enable",a.titleText=G_L.esc("Installation"),a.actionText=G_L.esc("Activate the software")),e){case"software-php-fpm-alt7_2":return a.soft="php-fpm-alt7_2",a.softLabel="php-fpm-alt7.2",a;case"software-php-fpm-alt7_3":return a.soft="php-fpm-alt7_3",a.softLabel="php-fpm-alt7.3",a;case"software-php-fpm-alt7_4":return a.soft="php-fpm-alt7_4",a.softLabel="php-fpm-alt7.4",a;case"software-php-fpm-alt8_0":return a.soft="php-fpm-alt8_0",a.softLabel="php-fpm-alt8.0",a;case"software-php-fpm-alt8_1":return a.soft="php-fpm-alt8_1",a.softLabel="php-fpm-alt8.1",a;case"software-php-fpm-alt8_2":return a.soft="php-fpm-alt8_2",a.softLabel="php-fpm-alt8.2",a;case"software-php-fpm-alt8_3":return a.soft="php-fpm-alt8_3",a.softLabel="php-fpm-alt8.3",a;case"software-php-fpm-alt8_4":return a.soft="php-fpm-alt8_4",a.softLabel="php-fpm-alt8.4",a}return null}async function software_OpenConfirmationWnd(e,t){let a=null;switch(e.target.id){case"software-webserver-httpd":case"software-webserver-nginx-httpd":case"software-firewall-off":case"software-firewall-iptables":case"software-firewall-nftables":if(!e.target.checked)return;a=software_OpenConfirmationWnd_Radio(e.target.id);break;case"software-php-fpm-alt7_2":case"software-php-fpm-alt7_3":case"software-php-fpm-alt7_4":case"software-php-fpm-alt8_0":case"software-php-fpm-alt8_1":case"software-php-fpm-alt8_2":case"software-php-fpm-alt8_3":case"software-php-fpm-alt8_4":a=software_OpenConfirmationWnd_Checkbox(e.target.id,e.target.checked);break}if(!a)return void notificationNew_addError("invalid software option");const n=[];n.push('<div class="row jc-between h-2"><p class="modal-title">'+a.titleText+'</p><span id="modal-close" class="modal-close">&times;</span></div><hr>\n'),n.push('<p class="m-t1">'+a.actionText+' <span class="c-cc f-1">'+a.softLabel+"</span> ?</p>\n"),n.push('<p class="d-block c-redlight m-t1 m-b1 f-1">'+a.warningLabel+"</p>\n"),n.push('<a id="modal-submit" class="btn">'+G_L.esc("Confirm")+"</a>");const s=document.getElementById("modal-content");s&&(s.innerHTML=n.join("\n"));const l=document.getElementById("modal-popup");l&&(l.style.display="block"),modal_Open(null,null),listener_AddSingleById("modal-close","mouseup",null,null,modal_Close),listener_AddSingleById("modal-popup","mouseup",null,null,modal_Close),listener_AddSingleById("modal-submit","mouseup","keyup","Enter",Software_Enable,a.soft,a.action)}common_listeners(),listener_AddSingleById("software-webserver-httpd","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-webserver-nginx-httpd","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt7_2","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt7_3","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt7_4","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt8_0","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt8_1","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt8_2","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt8_3","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-php-fpm-alt8_4","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-firewall-off","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-firewall-iptables","change","keyup","Enter",software_OpenConfirmationWnd,""),listener_AddSingleById("software-firewall-nftables","change","keyup","Enter",software_OpenConfirmationWnd,"");