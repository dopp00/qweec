"use strict";const G_L=new LangData("dbhost-lang");async function dbhost_LocationTypeSelector(e,t){if(!params_Validate(t,"e",1))return;const s=t[0],l=e.target.id=="dbhost-"+s+"-locsel-exist",d=e.target.id=="dbhost-"+s+"-locsel-cntnr";if(!l&&!d)return;if(!e.target.checked)return;const o=document.getElementById("dbhost-"+s+"-is-cntrsys-installed"),a=document.querySelector("label[for=dbhost-"+s+"-host]"),n=document.getElementById("dbhost-"+s+"-host"),r=document.querySelector("label[for=dbhost-"+s+"-containertpl]"),i=document.getElementById("dbhost-"+s+"-containertpl"),b=document.querySelector("label[for=dbhost-"+s+"-dbsys]"),c=document.getElementById("dbhost-"+s+"-dbsys"),u=document.querySelector("label[for=dbhost-"+s+"-superuser]"),h=document.getElementById("dbhost-"+s+"-superuser");a&&n&&r&&i&&b&&c&&u&&h&&(l?(o&&enableClass_DBlock(o,!1),enableClass_DBlock(a,!0),enableClass_DBlock(n,!0),enableClass_DBlock(r,!1),enableClass_DBlock(i,!1),enableClass_DBlock(b,!0),enableClass_DBlock(c,!0),enableClass_DBlock(u,!0),enableClass_DBlock(h,!0)):d&&(o&&enableClass_DBlock(o,!0),enableClass_DBlock(a,!1),enableClass_DBlock(n,!1),enableClass_DBlock(r,!0),enableClass_DBlock(i,!0),enableClass_DBlock(b,!1),enableClass_DBlock(c,!1),enableClass_DBlock(u,!1),enableClass_DBlock(h,!1)))}async function dbhost_Add_Confirm(e,t){const s=new PrepData(7),l=new PrepData(1);if(!l.prepareRadio(0,["#dbhost-add-locsel-exist","#dbhost-add-locsel-cntnr"]))return;if("'locsel-exist'"===l.arr[0]){let e=!1;if(s.prepareValue(0,"#dbhost-add-host",!0,G_L.raw("db host")+" "+G_L.raw("is required"))||(e=!0),s.prepareValue(3,"#dbhost-add-dbsys",!0,G_L.raw("db system")+" "+G_L.raw("is required"))||(e=!0),s.prepareValue(4,"#dbhost-add-superuser",!0,G_L.raw("superuser")+" "+G_L.raw("is required"))||(e=!0),s.prepareValue(5,"#dbhost-add-pass",!0,G_L.raw("password")+" "+G_L.raw("is required"))||(e=!0),e)return;s.prepareValue(1,"#dbhost-add-port",!1,""),s.prepareValue(6,"#dbhost-add-pgtpl",!1,"")}else{if("'locsel-cntnr'"!==l.arr[0])return;{let e=!1;if(s.prepareValue(2,"#dbhost-add-containertpl",!0,G_L.raw("container template")+" "+G_L.raw("is required"))||(e=!0),s.prepareValue(5,"#dbhost-add-pass",!0,G_L.raw("password")+" "+G_L.raw("is required"))||(e=!0),e)return;s.prepareValue(1,"#dbhost-add-port",!1,""),s.prepareValue(6,"#dbhost-add-pgtpl",!1,"")}}const d=e.target.id,o=new ButtonState(d),a=await fetchText_Post("/dbhost/?a="+d,s.arr.join(" "));o.restore(),isFetchedOk(a,"/dbhost/")}async function dbhost_Edit_Confirm(e,t){const s=new PrepData(4);let l=!1;if(s.prepareValue(0,"#dbhost-edit-server",!0,G_L.raw("db host")+" "+G_L.raw("is required"))||(l=!0),s.prepareValue(1,"#dbhost-edit-dbsys",!0,G_L.raw("db system")+" "+G_L.raw("is required"))||(l=!0),l)return;s.prepareValue(2,"#dbhost-edit-superpass",!1,""),s.prepareValue(3,"#dbhost-edit-pgtpl",!1,"");const d=e.target.id,o=new ButtonState(d),a=await fetchText_Post("/dbhost/?a="+d,s.arr.join(" "));o.restore(),isFetchedOk(a,"/dbhost/")}async function dbhost_Var_SubmitForm(e,t){if(!params_Validate(t,"e",1))return;const s=e.target.id,l=document.getElementById(t[0]),d=new ButtonState(s);l&&await l.submit(),d.restore()}common_listeners(),listener_AddSingleById("dbhost-edit","click","keyup","Enter",table_OnButtonClick_Router,"tbl-dbhost","/dbhost/?a=dbhost-edit&dbhost=",""),listener_AddSingleById("dbhost-var","click","keyup","Enter",table_OnButtonClick_Router,"tbl-dbhost","/dbhost/?a=dbhost-var&dbhost=",""),listener_AddSingleById("dbhost-log","click","keyup","Enter",table_OnButtonClick_Router,"tbl-dbhost","/dbhost/?a=dbhost-log&dbhost=",""),listener_AddSingleById("dbhost-delete-wnd","click","keyup","Enter",table_openDeleteWnd,"tbl-dbhost","/dbhost/?a=dbhost-delete","/dbhost/",G_L.esc("Delete")+" "+G_L.esc("database hosts"),G_L.esc("Next items will be deleted"),G_L.esc("Confirm"),'<label class="checkbox-simple-cntr m-t1"><input id="modal-dbhost-delete-dir" type="checkbox" class="input-checkbox" value="yes">'+G_L.esc("delete mounted data directories")+'</label><p class="d-block m-t05 m-b1 c-redlight">'+G_L.esc("if selected for containerized DBMS, all volumes and data directory on disk will be deleted!")+"</p>\n"),listener_AddSingleById("dbhost-add-locsel-exist","change",null,null,dbhost_LocationTypeSelector,"add"),listener_AddSingleById("dbhost-add-locsel-cntnr","change",null,null,dbhost_LocationTypeSelector,"add"),listener_AddSingleById("dbhost-add-pass-gen","click",null,null,button_passwordGen,"dbhost-add-pass"),listener_AddSingleById("dbhost-add-pass-vis","click",null,null,button_togglePasswordVisible,"dbhost-add-pass"),listener_AddSingleById("dbhost-add-confirm","click",null,null,dbhost_Add_Confirm),listener_AddSingleById("dbhost-edit-confirm","click",null,null,dbhost_Edit_Confirm),listener_AddSingleById("dbhost-edit-pass-gen","click",null,null,button_passwordGen,"dbhost-edit-pass"),listener_AddSingleById("dbhost-edit-pass-vis","click",null,null,button_togglePasswordVisible,"dbhost-edit-pass"),listeners_Add(null,".grid-value","input",null,null,input_Oninput),listener_AddSingleById("dbhost-var-confirm","click",null,null,dbhost_Var_SubmitForm,"dbhost-var-form"),listener_AddSingleById("dbhost-log-show","click","keyup","Enter",logPage_ShowLog,"#dbhost-log-host","dbhost"),listeners_Add("table.tbl-fixed tbody","tr","mouseup",null,null,table_OnClickRouter,"/dbhost/?a=dbhost-edit&dbhost="),listener_AddSingleById("dbhost-host-sort","click",null,null,table_Sort,"/dbhost/","dbhost-table-sort","sort-no,sort-host-az,sort-host-za"),listener_AddSingleById("dbhosts-checkbox-header","mouseup",null,null,table_SetAllCheckboxes,"table#tbl-dbhost tbody tr td .checkbox-simple-cntr input[type=checkbox]"),listeners_Add(null,".pageidx","click",null,null,table_SelectPage,"dbhost-table-page","/dbhost/"),listener_AddSingleById("dbhost-table-setting","click","keyup","Enter",tableSetting_Modal_OpenWnd,JSON.stringify({id:"dbhost-table-setting",cookie:"dbhost-table-setting",path:"/dbhost/",titles:[G_L.esc("Settings"),G_L.esc("Number of rows"),G_L.esc("custom"),G_L.esc("Confirm")],values:[1,2,4,8],names:["host","dbsys","version","containertpl"],labels:[G_L.esc("host"),G_L.esc("db system"),G_L.esc("version"),G_L.esc("container template")]}));